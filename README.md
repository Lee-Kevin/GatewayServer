# GatewayServer

## 程序更新日志

* 2017-08-30 Client端完成demo部分的基本代码，模拟数据上传至Server。下一个阶段将子设备的基本信息写入数据库
* 2017-08-31 增加interface_protocol.h/c 文件，并添加数据库操作函数，做了无数据库时，初始化新的数据库操作，下一步留出数据库更新状态接口
* 2017-09-01 已经留出数据库接口，下一步等待硬件就绪，就绪之后添加可重连机制及心跳机制。
* 2017-09-11 增加命令打包函数，下一步解析子设备上传的命令
* 2017-09-12 启动两个线程处理串口接收到的数据，下一步解析子设备上传的命令
* 2017-09-14 解决段错误问题，Json_delete 和 free 使用冲突导致段错误。完成解析S4子设备上传的数据，并打包数据，下一步完成使能入网后，插入数据库和查重操作
* 2017-09-15 解决上传信息时，偶尔出现的段错误，使能入网以后，在数据库中进行查重，并把新的节点信息上传至M1，下一步解析从服务器过来的数据，并操作设备
* 2017-09-18 完成了S1,S3,S4,S5, 4个设备的上传解析，下一步解决串口发送出现的问题
* 2017-09-19 解决了串口发送出现的问题，顺利通过和APP，Server端的联调，下一步解决场景问题，并增加心跳包维护
* 2017-09-26 解决socket 重链接问题，当server出现异常时，继续尝试登陆，下一步解决场景问题，并增加心跳包维护
* 2017-09-26 增加了继电器回复状态的相关函数，添加了开机启动和进程守护的脚本
* 2017-10-13 增加了心跳包功能，并能够对异常进行处理，下一步解决产品ID问题
* 2017-10-31 解决了产品ID问题，并完成了对S2设备的解析，下一步维护子设备的在线情况
* 2017-10-31 子设备离线状态检查完成，下一步完善重新连接请求，发送在线状态
